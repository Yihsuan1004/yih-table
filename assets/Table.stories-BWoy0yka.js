import{r as h}from"./index-DJO9vBfz.js";import{r as ye}from"./index-DLC2J04D.js";var oe={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Se=h,ve=Symbol.for("react.element"),we=Symbol.for("react.fragment"),Te=Object.prototype.hasOwnProperty,xe=Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Me={key:!0,ref:!0,__self:!0,__source:!0};function ae(s,o,e){var n,t={},r=null,i=null;e!==void 0&&(r=""+e),o.key!==void 0&&(r=""+o.key),o.ref!==void 0&&(i=o.ref);for(n in o)Te.call(o,n)&&!Me.hasOwnProperty(n)&&(t[n]=o[n]);if(s&&s.defaultProps)for(n in o=s.defaultProps,o)t[n]===void 0&&(t[n]=o[n]);return{$$typeof:ve,type:s,key:r,ref:i,props:t,_owner:xe.current}}j.Fragment=we;j.jsx=ae;j.jsxs=ae;oe.exports=j;var f=oe.exports,C=(s=>(s.DESCEND="descend",s.ASCEND="ascend",s))(C||{});const Ce=()=>{const[s,o]=h.useState(0),[e,n]=h.useState(0),t=h.useRef(null);return h.useEffect(()=>{const r=()=>{const i=t.current;if(i){const a=i.getBoundingClientRect();n(a.height);const l=i.querySelector("tr");l&&o(l.getBoundingClientRect().height)}};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),{rowHeight:s,containerHeight:e,containerRef:t}};function I(s,o,e){let n=e.initialDeps??[],t;return()=>{var r,i,a,l;let u;e.key&&((r=e.debug)!=null&&r.call(e))&&(u=Date.now());const d=s();if(!(d.length!==n.length||d.some((m,g)=>n[g]!==m)))return t;n=d;let p;if(e.key&&((i=e.debug)!=null&&i.call(e))&&(p=Date.now()),t=o(...d),e.key&&((a=e.debug)!=null&&a.call(e))){const m=Math.round((Date.now()-u)*100)/100,g=Math.round((Date.now()-p)*100)/100,y=g/16,b=(S,E)=>{for(S=String(S);S.length<E;)S=" "+S;return S};console.info(`%c⏱ ${b(g,5)} /${b(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*y,120))}deg 100% 31%);`,e==null?void 0:e.key)}return(l=e==null?void 0:e.onChange)==null||l.call(e,t),t}}function $(s,o){if(s===void 0)throw new Error("Unexpected undefined");return s}const Ee=(s,o)=>Math.abs(s-o)<1,De=(s,o,e)=>{let n;return function(...t){s.clearTimeout(n),n=s.setTimeout(()=>o.apply(this,t),e)}},Re=s=>s,Ie=s=>{const o=Math.max(s.startIndex-s.overscan,0),e=Math.min(s.endIndex+s.overscan,s.count-1),n=[];for(let t=o;t<=e;t++)n.push(t);return n},Oe=(s,o)=>{const e=s.scrollElement;if(!e)return;const n=s.targetWindow;if(!n)return;const t=i=>{const{width:a,height:l}=i;o({width:Math.round(a),height:Math.round(l)})};if(t(e.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const r=new n.ResizeObserver(i=>{const a=i[0];if(a!=null&&a.borderBoxSize){const l=a.borderBoxSize[0];if(l){t({width:l.inlineSize,height:l.blockSize});return}}t(e.getBoundingClientRect())});return r.observe(e,{box:"border-box"}),()=>{r.unobserve(e)}},F={passive:!0},ze=typeof window>"u"?!0:"onscrollend"in window,ke=(s,o)=>{const e=s.scrollElement;if(!e)return;const n=s.targetWindow;if(!n)return;let t=0;const r=ze?()=>{}:De(n,()=>{o(t,!1)},s.options.isScrollingResetDelay),i=u=>()=>{t=e[s.options.horizontal?"scrollLeft":"scrollTop"],r(),o(t,u)},a=i(!0),l=i(!1);return l(),e.addEventListener("scroll",a,F),e.addEventListener("scrollend",l,F),()=>{e.removeEventListener("scroll",a),e.removeEventListener("scrollend",l)}},qe=(s,o,e)=>{if(o!=null&&o.borderBoxSize){const n=o.borderBoxSize[0];if(n)return Math.round(n[e.options.horizontal?"inlineSize":"blockSize"])}return Math.round(s.getBoundingClientRect()[e.options.horizontal?"width":"height"])},_e=(s,{adjustments:o=0,behavior:e},n)=>{var t,r;const i=s+o;(r=(t=n.scrollElement)==null?void 0:t.scrollTo)==null||r.call(t,{[n.options.horizontal?"left":"top"]:i,behavior:e})};class Ne{constructor(o){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const n=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(t=>{t.forEach(r=>{this._measureElement(r.target,r)})}));return{disconnect:()=>{var t;return(t=n())==null?void 0:t.disconnect()},observe:t=>{var r;return(r=n())==null?void 0:r.observe(t,{box:"border-box"})},unobserve:t=>{var r;return(r=n())==null?void 0:r.unobserve(t)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([n,t])=>{typeof t>"u"&&delete e[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Re,rangeExtractor:Ie,onChange:()=>{},measureElement:qe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,...e}},this.notify=(e,n)=>{var t,r;const{startIndex:i,endIndex:a}=this.range??{startIndex:void 0,endIndex:void 0},l=this.calculateRange();(e||i!==(l==null?void 0:l.startIndex)||a!==(l==null?void 0:l.endIndex))&&((r=(t=this.options).onChange)==null||r.call(t,this,n))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.observer.disconnect(),this.elementsCache.clear()},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.notify(!1,!1);return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,t=>{this.scrollRect=t,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(t,r)=>{this.scrollAdjustments=0,this.scrollDirection=r?this.getScrollOffset()<t?"forward":"backward":null,this.scrollOffset=t;const i=this.isScrolling;this.isScrolling=r,this.notify(i!==r,r)}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,n)=>{const t=new Map,r=new Map;for(let i=n-1;i>=0;i--){const a=e[i];if(t.has(a.lane))continue;const l=r.get(a.lane);if(l==null||a.end>l.end?r.set(a.lane,a):a.end<l.end&&t.set(a.lane,!0),t.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((i,a)=>i.end===a.end?i.index-a.index:i.end-a.end)[0]:void 0},this.getMeasurementOptions=I(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,n,t,r,i)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:n,scrollMargin:t,getItemKey:r,enabled:i}),{key:!1}),this.getMeasurements=I(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:n,scrollMargin:t,getItemKey:r,enabled:i},a)=>{var l;if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const u=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,u);for(let c=u;c<e;c++){let p=(l=this.measurementsCache[c])==null?void 0:l.measureElement;p||(p=T=>{const v=r(c),w=this.elementsCache.get(v);if(!T){w&&(this.observer.unobserve(w),this.elementsCache.delete(v));return}w!==T&&(w&&this.observer.unobserve(w),this.observer.observe(T),this.elementsCache.set(v,T)),T.isConnected&&this.resizeItem(c,this.options.measureElement(T,void 0,this))});const m=r(c),g=this.options.lanes===1?d[c-1]:this.getFurthestMeasurement(d,c),y=g?g.end+this.options.gap:n+t,b=a.get(m),S=typeof b=="number"?b:this.options.estimateSize(c),E=y+S,R=g?g.lane:c%this.options.lanes;d[c]={index:c,start:y,size:S,end:E,key:m,lane:R,measureElement:p}}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=I(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(e,n,t)=>this.range=e.length>0&&n>0?je({measurements:e,outerSize:n,scrollOffset:t}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=I(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(e,n,t,r)=>n===null?[]:e({startIndex:n.startIndex,endIndex:n.endIndex,overscan:t,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const n=this.options.indexAttribute,t=e.getAttribute(n);return t?parseInt(t,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(e,n)=>{const t=this.indexFromElement(e),r=this.getMeasurements()[t];if(!r||!e.isConnected){this.elementsCache.forEach((a,l)=>{a===e&&(this.observer.unobserve(e),this.elementsCache.delete(l))});return}const i=this.elementsCache.get(r.key);i!==e&&(i&&this.observer.unobserve(i),this.observer.observe(e),this.elementsCache.set(r.key,e)),this.resizeItem(t,this.options.measureElement(e,n,this))},this.resizeItem=(e,n)=>{const t=this.getMeasurements()[e];if(!t)return;const r=this.itemSizeCache.get(t.key)??t.size,i=n-r;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(t,i,this):t.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,n)),this.notify(!0,!1))},this.measureElement=e=>{e&&this._measureElement(e,void 0)},this.getVirtualItems=I(()=>[this.getIndexes(),this.getMeasurements()],(e,n)=>{const t=[];for(let r=0,i=e.length;r<i;r++){const a=e[r],l=n[a];t.push(l)}return t},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const n=this.getMeasurements();if(n.length!==0)return $(n[le(0,n.length-1,t=>$(n[t]).start,e)])},this.getOffsetForAlignment=(e,n)=>{const t=this.getSize(),r=this.getScrollOffset();n==="auto"&&(e<=r?n="start":e>=r+t?n="end":n="start"),n==="start"?e=e:n==="end"?e=e-t:n==="center"&&(e=e-t/2);const i=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-t;return Math.max(Math.min(l,e),0)},this.getOffsetForIndex=(e,n="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const t=this.getMeasurements()[e];if(!t)return;const r=this.getSize(),i=this.getScrollOffset();if(n==="auto")if(t.end>=i+r-this.options.scrollPaddingEnd)n="end";else if(t.start<=i+this.options.scrollPaddingStart)n="start";else return[i,n];const a=n==="end"?t.end+this.options.scrollPaddingEnd:t.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,n),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:n="start",behavior:t}={})=>{this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,n),{adjustments:void 0,behavior:t})},this.scrollToIndex=(e,{align:n="auto",behavior:t}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const r=this.getOffsetForIndex(e,n);if(!r)return;const[i,a]=r;this._scrollToOffset(i,{adjustments:void 0,behavior:t}),t!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const[u]=$(this.getOffsetForIndex(e,a));Ee(u,this.getScrollOffset())||this.scrollToIndex(e,{align:a,behavior:t})}else this.scrollToIndex(e,{align:a,behavior:t})}))},this.scrollBy=(e,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var e;const n=this.getMeasurements();let t;return n.length===0?t=this.options.paddingStart:t=this.options.lanes===1?((e=n[n.length-1])==null?void 0:e.end)??0:Math.max(...n.slice(-this.options.lanes).map(r=>r.end)),t-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(e,{adjustments:n,behavior:t})=>{this.options.scrollToFn(e,{behavior:t,adjustments:n},this)},this.measure=()=>{var e,n;this.itemSizeCache=new Map,(n=(e=this.options).onChange)==null||n.call(e,this,!1)},this.setOptions(o)}}const le=(s,o,e,n)=>{for(;s<=o;){const t=(s+o)/2|0,r=e(t);if(r<n)s=t+1;else if(r>n)o=t-1;else return t}return s>0?s-1:0};function je({measurements:s,outerSize:o,scrollOffset:e}){const n=s.length-1,r=le(0,n,a=>s[a].start,e);let i=r;for(;i<n&&s[i].end<e+o;)i++;return{startIndex:r,endIndex:i}}const Ae=typeof document<"u"?h.useLayoutEffect:h.useEffect;function $e(s){const o=h.useReducer(()=>({}),{})[1],e={...s,onChange:(t,r)=>{var i;r?ye.flushSync(o):o(),(i=s.onChange)==null||i.call(s,t,r)}},[n]=h.useState(()=>new Ne(e));return n.setOptions(e),h.useEffect(()=>n._didMount(),[]),Ae(()=>n._willUpdate()),n}function Le(s){return $e({observeElementRect:Oe,observeElementOffset:ke,scrollToFn:_e,...s})}const Pe=({data:s,initialSortConfig:o,onTableChange:e})=>{const[n,t]=h.useState(o),r=(l,u,d,c)=>[...l].sort((m,g)=>{if(c&&typeof c=="function")return c(m,g,d);const y=m[u],b=g[u];return typeof y=="number"&&typeof b=="number"?d===C.ASCEND?y-b:b-y:typeof y=="string"&&typeof b=="string"?d===C.ASCEND?y.localeCompare(b):b.localeCompare(y):0}),i=h.useCallback((l,u)=>{let d=C.ASCEND;n.field===l&&n.sortOrder===C.ASCEND&&(d=C.DESCEND);const c={field:l,sortOrder:d};return t(c),u===!0?{data:s,sortConfig:c}:{data:r(s,l,d,typeof u=="function"?u:void 0),sortConfig:c}},[s,n]),a=h.useCallback((l,u)=>{const{data:d,sortConfig:c}=i(l,u);e({sorter:c,currentData:d})},[i,e]);return{onSort:i,sortConfig:n,handleSort:a}},Fe=({externalRef1:s,externalRef2:o})=>{const e=h.useRef(null),n=h.useRef(null),t=s||e,r=o||n;return h.useEffect(()=>{const i=()=>{t.current&&r.current&&(console.log("handleScroll",t,r.current.scrollLeft),t.current.scrollLeft=r.current.scrollLeft,console.log("handleScroll",t.current.scrollLeft))},a=r.current;return a&&a.addEventListener("scroll",i),()=>{a&&a.removeEventListener("scroll",i)}},[t,r]),[t,r]},Be=({virtualScroll:s,onScrollFetch:o,virtualizer:e,tableData:n,setTableData:t})=>{const[r,i]=h.useState(!1),[a,l]=h.useState(0),u=h.useRef(!0),d=h.useCallback(async()=>{if(!(!s||r||!u||!o)){i(!0);try{const{data:c}=await o(a);if(c.length===0)u.current=!1;else return l(p=>p+c.length),c}finally{i(!1)}}},[s,r,o,a]);return h.useEffect(()=>{if(!o||!e)return;const[c]=[...e.getVirtualItems()].reverse();c&&c.index>=n.length-1&&u.current&&!r&&d().then(p=>{p&&t(m=>[...m,...p])})},[d,r,e,n.length,o,t]),{loading:r,offset:a,setOffset:l,hasNextPage:u,handleScrollFetch:d}},A=({column:s,row:o,colIndex:e,columns:n,isFixedLeft:t,isFixedRight:r,isHeader:i,onClick:a,tableState:l,scrollInfo:u})=>{var T;const d=h.useRef(null),[c,p]=h.useState(0),[m,g]=h.useState(0);h.useEffect(()=>{if(t||r){let v=0;if(t){for(let w=0;w<e;w++){const x=document.querySelector(`.col-${w}`);x&&(v+=x.offsetWidth)}p(v)}if(r){v=0;for(let w=n.length-1;w>e;w--){const x=document.querySelector(`.col-${w}`);x&&(v+=x.offsetWidth)}g(v)}}},[e,n,t,r]);const y=i?"th":"td",b=t&&e===n.filter(v=>v.fixed==="left").length-1,S=r&&e===n.length-n.filter(v=>v.fixed==="right").length,E=b&&(u==null?void 0:u.left)||!1,R=S&&(u==null?void 0:u.right)||!1;return f.jsx(y,{ref:d,style:{width:s.width,left:t?`${c}px`:void 0,right:r?`${m}px`:void 0},className:`
        yh-table-cell
        ${i?"yh-table-head":""}
        ${t?"sticky":""} 
        ${r?"sticky":""} 
        ${t||r?"z-10":""}
        ${b?"fixed-left-last":""}
        ${S?"fixed-right-first":""}
        ${(E||R)&&u?"show-shadow":""}
        col-${e}
      `,onClick:a,children:i?s.title+(((T=l.sorter)==null?void 0:T.field)===s.field?l.sorter.sortOrder===C.ASCEND?"↑":"↓":""):s.render?s.render(o[s.field],o):o[s.field]},s.field)};A.__docgenInfo={description:"",methods:[],displayName:"TableCell",props:{column:{required:!0,tsType:{name:"TableColumn"},description:""},colIndex:{required:!0,tsType:{name:"number"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"TableColumn"}],raw:"TableColumn[]"},description:""},isFixedLeft:{required:!0,tsType:{name:"boolean"},description:""},isFixedRight:{required:!0,tsType:{name:"boolean"},description:""},row:{required:!1,tsType:{name:"any"},description:""},isHeader:{required:!1,tsType:{name:"boolean"},description:""},tableState:{required:!1,tsType:{name:"any"},description:""},scrollInfo:{required:!1,tsType:{name:"signature",type:"object",raw:"{ left: number; right: number }",signature:{properties:[{key:"left",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}}]}},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ce=({columns:s,handleSort:o,tableState:e,scrollInfo:n,theadRef:t})=>f.jsx("div",{className:"yh-table-head-container",ref:t,children:f.jsx("table",{className:"yh-table",children:f.jsx("thead",{children:f.jsx("tr",{children:s.map((r,i)=>f.jsx(A,{column:r,colIndex:i,columns:s,isFixedLeft:r.fixed==="left",isFixedRight:r.fixed==="right",isHeader:!0,onClick:()=>r.sortable&&o(r.field,r.customSort),tableState:e,scrollInfo:n},r.field))})})})});ce.__docgenInfo={description:"",methods:[],displayName:"TableHeader",props:{columns:{required:!0,tsType:{name:"TableProps['columns']",raw:"TableProps['columns']"},description:""},handleSort:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, customSort?: SortFunction) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"((a: any, b: any, sortOrder: SortOrder) => number) | boolean",elements:[{name:"unknown"},{name:"boolean"}]},name:"customSort"}],return:{name:"void"}}},description:""},tableState:{required:!0,tsType:{name:"TableState"},description:""},scrollInfo:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  left: number;
  right: number;
}`,signature:{properties:[{key:"left",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}}]}},description:""},theadRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},description:""}}};const de=({index:s,className:o,row:e,columns:n,scrollInfo:t})=>f.jsx("tr",{className:o,children:n.map((r,i)=>{const a=r.fixed==="left",l=r.fixed==="right";return f.jsx(A,{column:r,row:e,colIndex:i,columns:n,isFixedLeft:a,isFixedRight:l,scrollInfo:t},r.field)})},s),ue=({virtualRow:s,index:o,className:e,row:n,columns:t,scrollInfo:r})=>f.jsx("tr",{className:e,style:{height:`${s==null?void 0:s.size}px`,transform:`translateY(${s.start-o*s.size}px)`},children:t.map((i,a)=>{const l=i.fixed==="left",u=i.fixed==="right";return f.jsx(A,{column:i,row:n,colIndex:a,columns:t,isFixedLeft:l,isFixedRight:u,scrollInfo:r},i.field)})},n.id);de.__docgenInfo={description:"",methods:[],displayName:"TableRow",props:{index:{required:!0,tsType:{name:"number"},description:""},className:{required:!1,tsType:{name:"string"},description:""},row:{required:!0,tsType:{name:"Record",elements:[{name:"K"},{name:"T"}],raw:"Record<K, T>"},description:""},virtualRow:{required:!1,tsType:{name:"VirtualItem",elements:[{name:"Element"}],raw:"VirtualItem<Element>"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"TableColumn"}],raw:"TableColumn[]"},description:""},scrollInfo:{required:!0,tsType:{name:"signature",type:"object",raw:"{ left: number; right: number }",signature:{properties:[{key:"left",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}}]}},description:""}}};ue.__docgenInfo={description:"",methods:[],displayName:"VirtualTableRow",props:{index:{required:!0,tsType:{name:"number"},description:""},className:{required:!1,tsType:{name:"string"},description:""},row:{required:!0,tsType:{name:"Record",elements:[{name:"K"},{name:"T"}],raw:"Record<K, T>"},description:""},virtualRow:{required:!1,tsType:{name:"VirtualItem",elements:[{name:"Element"}],raw:"VirtualItem<Element>"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"TableColumn"}],raw:"TableColumn[]"},description:""},scrollInfo:{required:!0,tsType:{name:"signature",type:"object",raw:"{ left: number; right: number }",signature:{properties:[{key:"left",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}}]}},description:""}}};const he=({virtualScroll:s,rowHeight:o,containerHeight:e,virtualizer:n,tableData:t,columns:r,hasNextPage:i,tbodyRef:a,scrollInfo:l,onScroll:u})=>f.jsx("div",{ref:a,className:"yh-table-container",onScroll:u,children:f.jsx("div",{style:{height:`${n.getTotalSize()}px`},children:f.jsx("table",{className:"yh-table",children:f.jsx("tbody",{children:s&&o>0&&e>0?n.getVirtualItems().map((d,c)=>{const p=d.index>=t.length-1,m=t[d.index];return p?f.jsx("tr",{style:{height:`${o}px`},children:f.jsx("td",{colSpan:r.length,className:"yh-table-loader",children:i.current?"載入中...":"無更多資料"})},`loader-${c}`):f.jsx(ue,{index:c,row:m,virtualRow:d,columns:r,scrollInfo:l},(m==null?void 0:m.id)||c)}):t.map((d,c)=>f.jsx(de,{index:c,row:d,columns:r,scrollInfo:l},c))})})})});he.__docgenInfo={description:"",methods:[],displayName:"TableBody",props:{virtualScroll:{required:!0,tsType:{name:"boolean"},description:""},rowHeight:{required:!0,tsType:{name:"number"},description:""},containerHeight:{required:!0,tsType:{name:"number"},description:""},virtualizer:{required:!0,tsType:{name:"Virtualizer",elements:[{name:"any"},{name:"any"}],raw:"Virtualizer<any, any>"},description:""},tableData:{required:!0,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},columns:{required:!0,tsType:{name:"TableProps['columns']",raw:"TableProps['columns']"},description:""},hasNextPage:{required:!0,tsType:{name:"ReactMutableRefObject",raw:"React.MutableRefObject<boolean>",elements:[{name:"boolean"}]},description:""},tbodyRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},description:""},scrollInfo:{required:!0,tsType:{name:"signature",type:"object",raw:"{ left: number; right: number }",signature:{properties:[{key:"left",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}}]}},description:""},onScroll:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.UIEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactUIEvent",raw:"React.UIEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"event"}],return:{name:"void"}}},description:""}}};const me=({columns:s,className:o,onChange:e,onScrollFetch:n,data:t,virtualScroll:r=!1})=>{const[i,a]=h.useState(t),[l,u]=h.useState({sorter:{field:"",sortOrder:C.DESCEND},currentData:[]}),{rowHeight:d,containerHeight:c,containerRef:p}=Ce(),[m,g]=h.useState({left:0,right:0}),[y,b]=Fe({externalRef1:void 0,externalRef2:p}),S=h.useRef(null),E=h.useCallback(M=>{const D=M.target;g({left:D.scrollLeft,right:D.scrollWidth-D.clientWidth-D.scrollLeft})},[]),{setOffset:R,hasNextPage:T,handleScrollFetch:v,loading:w}=Be({virtualScroll:r,onScrollFetch:n,virtualizer:S.current,tableData:i,setTableData:a}),x=Le({count:T?i.length+1:i.length,getScrollElement:()=>p.current,estimateSize:()=>50,overscan:10,onChange:M=>{const[D]=[...M.getVirtualItems()].reverse();D&&D.index>=i.length-1&&T&&!w&&v()}});h.useEffect(()=>{S.current=x},[x]);const ge=M=>{a(M.currentData||[]),u(M),e==null||e(M)},{sortConfig:P,handleSort:be}=Pe({data:t,initialSortConfig:l.sorter,onTableChange:ge});return h.useEffect(()=>{u(M=>({...M,sorter:P}))},[P]),h.useEffect(()=>{R(t.length),a(t||[])},[t]),f.jsxs("div",{className:`yh-table-outer-container ${o}`,children:[f.jsx(ce,{theadRef:y,columns:s,handleSort:be,tableState:l,scrollInfo:m}),f.jsx(he,{virtualScroll:r,rowHeight:d,containerHeight:c,virtualizer:x,tableData:i,columns:s,hasNextPage:T,tbodyRef:b,scrollInfo:m,onScroll:E})]})};me.__docgenInfo={description:"",methods:[],displayName:"Table",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"Record",elements:[{name:"K"},{name:"T"}],raw:"Record<K, T>"}],raw:"RecordType[]"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"TableColumn"}],raw:"TableColumn[]"},description:""},virtualScroll:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(state: TableState) => void",signature:{arguments:[{type:{name:"TableState"},name:"state"}],return:{name:"void"}}},description:""},onScrollFetch:{required:!1,tsType:{name:"signature",type:"function",raw:"(offset: number, limit?: number) => Promise<ScrollFetchDataResult<T>>",signature:{arguments:[{type:{name:"number"},name:"offset"},{type:{name:"number"},name:"limit"}],return:{name:"Promise",elements:[{name:"signature",type:"object",raw:`{
  data: T[];
  nextOffset: number; // 下一個偏移量
  hasMore: boolean; // 是否還有更多資料
}`,signature:{properties:[{key:"data",value:{name:"Array",elements:[{name:"T"}],raw:"T[]",required:!0}},{key:"nextOffset",value:{name:"number",required:!0}},{key:"hasMore",value:{name:"boolean",required:!0}}]}}],raw:"Promise<ScrollFetchDataResult<T>>"}}},description:""}}};const fe=s=>{const o=["John Doe","Jane Smith","Michael Brown","Alice Johnson","Chris Lee","Emma Wilson"],e=[];for(let n=1;n<=s;n++){const t=o[Math.floor(Math.random()*o.length)],r=Math.floor(Math.random()*60)+18;e.push({id:"#"+n,name:`${t} ${n}`,age:r})}return e},Ve=s=>{const o=[],e=["待付款","已付款","配送中","已完成","已取消","退貨中"],n=["信用卡","PayPal","銀行轉帳","貨到付款"],t=["標準配送","快速配送","超商取貨","國際運送"],r=["電子產品","服飾","家居用品","食品","書籍","運動用品"],i=["供應商A","供應商B","供應商C","供應商D","供應商E"],a=["官網","實體店面","第三方平台","社交媒體"],l=["北部倉庫","中部倉庫","南部倉庫","東部倉庫"],u=["新客戶","回頭客","VIP客戶","企業客戶"];for(let d=0;d<s;d++){const c=new Date(Date.now()-Math.floor(Math.random()*365*24*60*60*1e3)),p=Math.floor(Math.random()*10)+1,m=Math.floor(Math.random()*1e3)+100,g=p*m;o.push({orderId:`ORD${String(d+1).padStart(6,"0")}`,orderDate:c.toISOString().split("T")[0],customerName:`客戶${d+1}`,totalAmount:g,status:e[Math.floor(Math.random()*e.length)],paymentMethod:n[Math.floor(Math.random()*n.length)],shippingMethod:t[Math.floor(Math.random()*t.length)],trackingNumber:`TRK${Math.random().toString(36).substr(2,9).toUpperCase()}`,productName:`商品${d+1}`,sku:`SKU${String(d+1).padStart(6,"0")}`,quantity:p,unitPrice:m,discount:Math.floor(Math.random()*20),tax:Math.floor(g*.05),shippingAddress:`地址${d+1}`,phoneNumber:`09${Math.floor(Math.random()*1e8).toString().padStart(8,"0")}`,email:`customer${d+1}@example.com`,returnStatus:Math.random()>.9?"已退貨":"未退貨",refundAmount:Math.random()>.9?Math.floor(g*Math.random()):0,stockLevel:Math.floor(Math.random()*100),category:r[Math.floor(Math.random()*r.length)],supplier:i[Math.floor(Math.random()*i.length)],lastUpdated:new Date().toISOString().split("T")[0],rating:(Math.random()*5).toFixed(1),reviewCount:Math.floor(Math.random()*100),promotionCode:Math.random()>.7?`PROMO${Math.random().toString(36).substr(2,6).toUpperCase()}`:"",profitMargin:(Math.random()*.5).toFixed(2),salesChannel:a[Math.floor(Math.random()*a.length)],warehouseLocation:l[Math.floor(Math.random()*l.length)],customerType:u[Math.floor(Math.random()*u.length)]})}return o},L=[{id:1,name:"John Doe Brown",age:28,action:"edit"},{id:2,name:"Jane Smith",age:34,action:"delete"},{id:3,name:"Michael Brown",age:45,action:"edit"},{id:4,name:"Augustine Williams",age:18,action:"edit"}],We=fe(1e3),He=fe(50),Ue=[{field:"id",title:"ID",sortable:!0,fixed:"left"},{field:"name",title:"Name",sortable:!0},{field:"age",title:"Age",sortable:!0},{field:"action",title:"Action",fixed:"right",render:(s,o)=>f.jsx("button",{onClick:()=>alert(`You clicked ${s} for ${o.name}`),children:s})}],pe=[{field:"id",title:"ID",fixed:"left"},{field:"name",title:"Name",fixed:"left"},{field:"age",title:"Age",fixed:"left"}],Ke=[{field:"id",title:"ID",sortable:!0,customSort:!0},{field:"name",title:"Name",sortable:!0,customSort:!0},{field:"age",title:"Age",sortable:!0,customSort:!0},{field:"action",title:"Action",fixed:"right",render:(s,o)=>f.jsx("button",{onClick:()=>alert(`You clicked ${s} for ${o.name}`),children:s})}],Je=(s,o,e)=>{const n=s.name.length,t=o.name.length;return e===C.ASCEND?n-t:t-n},Ye=[{field:"id",title:"ID",sortable:!0},{field:"name",title:"Name",sortable:!0,customSort:Je},{field:"age",title:"Age",sortable:!0},{field:"action",title:"Action",render:(s,o)=>f.jsx("button",{onClick:()=>alert(`You clicked ${s} for ${o.name}`),children:s})}],Ge=[{field:"orderId",title:"訂單編號",width:120,fixed:"left"},{field:"orderDate",title:"下單日期",width:110,fixed:"left"},{field:"customerName",title:"客戶姓名",width:150},{field:"totalAmount",title:"訂單金額",width:100},{field:"status",title:"訂單狀態",width:100},{field:"paymentMethod",title:"付款方式",width:120},{field:"shippingMethod",title:"配送方式",width:120},{field:"trackingNumber",title:"追蹤號碼",width:130},{field:"productName",title:"商品名稱",width:200},{field:"sku",title:"SKU",width:100},{field:"quantity",title:"數量",width:80},{field:"unitPrice",title:"單價",width:90},{field:"discount",title:"折扣",width:80},{field:"tax",title:"稅額",width:80},{field:"shippingAddress",title:"收貨地址",width:250},{field:"phoneNumber",title:"聯絡電話",width:120},{field:"email",title:"電子郵件",width:180},{field:"returnStatus",title:"退貨狀態",width:100},{field:"refundAmount",title:"退款金額",width:100},{field:"stockLevel",title:"庫存水平",width:100},{field:"category",title:"商品類別",width:120},{field:"supplier",title:"供應商",width:150},{field:"lastUpdated",title:"最後更新",width:110},{field:"rating",title:"商品評分",width:90},{field:"reviewCount",title:"評論數",width:90},{field:"promotionCode",title:"促銷代碼",width:110},{field:"profitMargin",title:"利潤率",width:90},{field:"salesChannel",title:"銷售渠道",width:120},{field:"warehouseLocation",title:"倉庫位置",width:130,fixed:"right"},{field:"customerType",title:"客戶類型",width:100,fixed:"right"}],Qe=Ve(100),Xe=s=>{console.log("Table State:",s)},nt={title:"Components/Table",component:me,parameters:{layout:"centered"},tags:["autodocs"]},O={args:{data:L,columns:Ue}},z={args:{data:L,columns:Ke,onChange:Xe}},k={args:{data:L,columns:Ye}},q={args:{data:We,columns:pe,virtualScroll:!0}},Ze=async(s,o)=>{console.log(`Fetching more data from offset and limit: ${s} ${o}`);const e=[{id:"N"+s+3,name:`New Data ${s+3}`,age:31},{id:"N"+s+4,name:`New Data ${s+4}`,age:32},{id:"N"+s+5,name:`New Data ${s+5}`,age:33},{id:"N"+s+6,name:`New Data ${s+6}`,age:34}],n=s+e.length,t=n<100;return new Promise(r=>{setTimeout(()=>{r({data:e,nextOffset:n,hasMore:t})},1e3)})},_={args:{data:He,columns:pe,virtualScroll:!0,onScrollFetch:Ze}},N={args:{data:Qe,columns:Ge,virtualScroll:!0,className:"w-[800px]"}};var B,V,W;O.parameters={...O.parameters,docs:{...(B=O.parameters)==null?void 0:B.docs,source:{originalSource:`{
  args: {
    data: sampleData,
    columns
  }
}`,...(W=(V=O.parameters)==null?void 0:V.docs)==null?void 0:W.source}}};var H,U,K;z.parameters={...z.parameters,docs:{...(H=z.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    data: sampleData,
    columns: backendColumns,
    onChange: handleTableStateChange
  }
}`,...(K=(U=z.parameters)==null?void 0:U.docs)==null?void 0:K.source}}};var J,Y,G;k.parameters={...k.parameters,docs:{...(J=k.parameters)==null?void 0:J.docs,source:{originalSource:`{
  args: {
    data: sampleData,
    columns: customColumns
  }
}`,...(G=(Y=k.parameters)==null?void 0:Y.docs)==null?void 0:G.source}}};var Q,X,Z;q.parameters={...q.parameters,docs:{...(Q=q.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {
    data: virtualSampleData,
    columns: virtualScrollColumns,
    virtualScroll: true
  }
}`,...(Z=(X=q.parameters)==null?void 0:X.docs)==null?void 0:Z.source}}};var ee,te,ne;_.parameters={..._.parameters,docs:{...(ee=_.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    data: virtualSampleData2,
    columns: virtualScrollColumns,
    virtualScroll: true,
    onScrollFetch: handleScrollFetch
  }
}`,...(ne=(te=_.parameters)==null?void 0:te.docs)==null?void 0:ne.source}}};var re,se,ie;N.parameters={...N.parameters,docs:{...(re=N.parameters)==null?void 0:re.docs,source:{originalSource:`{
  args: {
    data: ecommerceData,
    columns: ecommerceColumns,
    virtualScroll: true,
    className: 'w-[800px]'
  }
}`,...(ie=(se=N.parameters)==null?void 0:se.docs)==null?void 0:ie.source}}};const rt=["DefaultSort","BackendSort","CustomSort","VirtualScroll","InffinityScroll","FixedColumns"];export{z as BackendSort,k as CustomSort,O as DefaultSort,N as FixedColumns,_ as InffinityScroll,q as VirtualScroll,rt as __namedExportsOrder,nt as default};
